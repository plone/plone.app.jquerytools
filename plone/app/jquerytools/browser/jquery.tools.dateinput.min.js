/*
                                     
 jQuery Tools v1.2.7 Dateinput - <input type="date" /> for humans

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/form/dateinput/

 Since: Mar 2010
 Date: 2012-04-30 14:24 
*/
(function(e,J){function Q(b,a){return(new Date(b,a+1,0)).getDate()}function U(b,a){b=""+b;for(a=a||2;b.length<a;)b="0"+b;return b}function V(b,a,i,k){var h=a.getDate(),v=a.getDay(),m=a.getMonth(),g=a.getFullYear();h={d:h,dd:U(h),ddd:C[k].shortDays[v],dddd:C[k].days[v],m:m+1,mm:U(m+1),mmm:C[k].shortMonths[m],mmmm:C[k].months[m],yy:String(g).slice(2),yyyy:g};b=W[b](i,a,h,k);return $.html(b).html()}function p(b){return parseInt(b,10)}function X(b,a){return b.getFullYear()===a.getFullYear()&&b.getMonth()==
a.getMonth()&&b.getDate()==a.getDate()}function z(b){if(b!==J){if(b.constructor==Date)return b;if(typeof b=="string"){var a=b.split("-");if(a.length==3)return new Date(p(a[0]),p(a[1])-1,p(a[2]));if(!/^-?\d+$/.test(b))return;b=p(b)}a=new Date;a.setDate(a.getDate()+b);return a}}function aa(b,a){function i(c,d,f){q=c;D=c.getFullYear();F=c.getMonth();E=c.getDate();f||(f=e.Event("api"));f.type=="click"&&!e.browser.msie&&b.focus();f.type="beforeChange";G.trigger(f,[c]);if(!f.isDefaultPrevented()){b.val(V(d.formatter,
c,d.format,d.lang));f.type="change";G.trigger(f);b.data("date",c);h.hide(f)}}function k(c){c.type="onShow";G.trigger(c);e(document).on("keydown.d",function(d){if(d.ctrlKey)return true;var f=d.keyCode;if(f==8||f==46){b.val("");return h.hide(d)}if(f==27||f==9)return h.hide(d);if(e(Y).index(f)>=0){if(!w){h.show(d);return d.preventDefault()}var j=e("#"+g.weeks+" a"),t=e("."+g.focus),r=j.index(t);t.removeClass(g.focus);if(f==74||f==40)r+=7;else if(f==75||f==38)r-=7;else if(f==76||f==39)r+=1;else if(f==
72||f==37)r-=1;if(r>41){h.addMonth();t=e("#"+g.weeks+" a:eq("+(r-42)+")")}else if(r<0){h.addMonth(-1);t=e("#"+g.weeks+" a:eq("+(r+42)+")")}else t=j.eq(r);t.addClass(g.focus);return d.preventDefault()}if(f==34)return h.addMonth();if(f==33)return h.addMonth(-1);if(f==36)return h.today();if(f==13)e(d.target).is("select")||e("."+g.focus).click();return e([16,17,18,9]).index(f)>=0});e(document).on("click.d",function(d){var f=d.target;if(!e(f).parents("#"+g.root).length&&f!=b[0]&&(!K||f!=K[0]))h.hide(d)})}
var h=this,v=new Date,m=v.getFullYear(),g=a.css,L=C[a.lang],l=e("#"+g.root),R=l.find("#"+g.title),K,M,N,D,F,E,q=b.attr("data-value")||a.value||b.val(),o=b.attr("min")||a.min,s=b.attr("max")||a.max,w,O;if(o===0)o="0";q=z(q)||v;o=z(o||new Date(m+a.yearRange[0],1,1));s=z(s||new Date(m+a.yearRange[1]+1,1,-1));if(!L)throw"Dateinput: invalid language: "+a.lang;if(b.attr("type")=="date"){O=b.clone();m=O.wrap("<div/>").parent().html();m=e(m.replace(/type/i,"type=text data-orig-type"));a.value&&m.val(a.value);
b.replaceWith(m);b=m}b.addClass(g.input);var G=b.add(h);if(!l.length){l=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",g.root);l.children().eq(0).attr("id",g.head).end().eq(1).attr("id",g.body).children().eq(0).attr("id",g.days).end().eq(1).attr("id",g.weeks).end().end().end().find("a").eq(0).attr("id",g.prev).end().eq(1).attr("id",g.next);R=l.find("#"+g.head).find("div").attr("id",g.title);if(a.selectors){var A=e("<select/>").attr("id",
g.month),B=e("<select/>").attr("id",g.year);R.html(A.add(B))}m=l.find("#"+g.days);for(var S=0;S<7;S++)m.append(e("<span/>").text(L.shortDays[(S+a.firstDay)%7]));e("body").append(l)}if(a.trigger)K=e("<a/>").attr("href","#").addClass(g.trigger).click(function(c){a.toggle?h.toggle():h.show();return c.preventDefault()}).insertAfter(b);var P=l.find("#"+g.weeks);B=l.find("#"+g.year);A=l.find("#"+g.month);e.extend(h,{show:function(c){if(!(b.attr("readonly")||b.attr("disabled")||w)){c=c||e.Event();c.type=
"onBeforeShow";G.trigger(c);if(!c.isDefaultPrevented()){e.each(Z,function(){this.hide()});w=true;A.off("change").change(function(){h.setValue(p(B.val()),p(e(this).val()))});B.off("change").change(function(){h.setValue(p(e(this).val()),p(A.val()))});M=l.find("#"+g.prev).off("click").click(function(){M.hasClass(g.disabled)||h.addMonth(-1);return false});N=l.find("#"+g.next).off("click").click(function(){N.hasClass(g.disabled)||h.addMonth();return false});h.setValue(q);var d=b.offset();if(/iPad/i.test(navigator.userAgent))d.top-=
e(window).scrollTop();l.css({top:d.top+b.outerHeight({margins:true})+a.offset[0],left:d.left+a.offset[1]});if(a.speed)l.show(a.speed,function(){k(c)});else{l.show();k(c)}return h}}},setValue:function(c,d,f){var j=p(d)>=-1?new Date(p(c),p(d),p(f==J||isNaN(f)?1:f)):c||q;if(j<o)j=o;else if(j>s)j=s;if(typeof c=="string")j=z(c);c=j.getFullYear();d=j.getMonth();f=j.getDate();if(d==-1){d=11;c--}else if(d==12){d=0;c++}if(!w){i(j,a);return h}F=d;D=c;E=f;f=new Date(c,d,1-a.firstDay);f=f.getDay();var t=Q(c,
d),r=Q(c,d-1),T;if(a.selectors){A.empty();e.each(L.months,function(x,H){o<new Date(c,x+1,1)&&s>new Date(c,x,0)&&A.append(e("<option/>").html(H).attr("value",x))});B.empty();j=v.getFullYear();for(var n=j+a.yearRange[0];n<j+a.yearRange[1];n++)o<new Date(n+1,0,1)&&s>new Date(n,0,0)&&B.append(e("<option/>").text(n));A.val(d);B.val(c)}else R.html(L.months[d]+" "+c);P.empty();M.add(N).removeClass(g.disabled);n=!f?-7:0;for(var u,y;n<(!f?35:42);n++){u=e("<a/>");if(n%7===0){T=e("<div/>").addClass(g.week);
P.append(T)}if(n<f){u.addClass(g.off);y=r-f+n+1;j=new Date(c,d-1,y)}else if(n>=f+t){u.addClass(g.off);y=n-t-f+1;j=new Date(c,d+1,y)}else{y=n-f+1;j=new Date(c,d,y);if(X(q,j))u.attr("id",g.current).addClass(g.focus);else X(v,j)&&u.attr("id",g.today)}o&&j<o&&u.add(M).addClass(g.disabled);s&&j>s&&u.add(N).addClass(g.disabled);u.attr("href","#"+y).text(y).data("date",j);T.append(u)}P.find("a").click(function(x){var H=e(this);if(!H.hasClass(g.disabled)){e("#"+g.current).removeAttr("id");H.attr("id",g.current);
i(H.data("date"),a,x)}return false});g.sunday&&P.find("."+g.week).each(function(){var x=a.firstDay?7-a.firstDay:0;e(this).children().slice(x,x+1).addClass(g.sunday)});return h},setMin:function(c,d){o=z(c);d&&q<o&&h.setValue(o);return h},setMax:function(c,d){s=z(c);d&&q>s&&h.setValue(s);return h},today:function(){return h.setValue(v)},addDay:function(c){return this.setValue(D,F,E+(c||1))},addMonth:function(c){c=F+(c||1);var d=Q(D,c);d=E<=d?E:d;return this.setValue(D,c,d)},addYear:function(c){return this.setValue(D+
(c||1),F,E)},destroy:function(){b.add(document).off("click.d keydown.d");l.add(K).remove();b.removeData("dateinput").removeClass(g.input);O&&b.replaceWith(O)},hide:function(c){if(w){c=e.Event();c.type="onHide";G.trigger(c);if(c.isDefaultPrevented())return;e(document).off("click.d keydown.d");l.hide();w=false}return h},toggle:function(){return h.isOpen()?h.hide():h.show()},getConf:function(){return a},getInput:function(){return b},getCalendar:function(){return l},getValue:function(c){return c?V(a.formatter,
q,c,a.lang):q},isOpen:function(){return w}});e.each(["onBeforeShow","onShow","change","onHide"],function(c,d){e.isFunction(a[d])&&e(h).on(d,a[d]);h[d]=function(f){f&&e(h).on(d,f);return h}});a.editable||b.on("focus.d click.d",h.show).keydown(function(c){var d=c.keyCode;if(!w&&e(Y).index(d)>=0){h.show(c);return c.preventDefault()}else if(d==8||d==46)b.val("");return c.shiftKey||c.ctrlKey||c.altKey||d==9?true:c.preventDefault()});z(b.val())&&i(q,a)}e.tools=e.tools||{version:"v1.2.7"};var Z=[],W={},
I,Y=[75,76,38,39,74,72,40,37],C={};I=e.tools.dateinput={conf:{format:"mm/dd/yy",formatter:"default",selectors:false,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:J,max:J,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},addFormatter:function(b,a){W[b]=a},localize:function(b,a){e.each(a,function(i,k){a[i]=k.split(",")});C[b]=a}};
I.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var $=e("<a/>");I.addFormatter("default",function(b,a,i){return b.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,function(k){return k in i?i[k]:k})});I.addFormatter("prefixed",function(b,a,i){return b.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,
function(k,h){return h in i?i[h]:k})});e.expr[":"].date=function(b){var a=b.getAttribute("type");return a&&a=="date"||!!e(b).data("dateinput")};e.fn.dateinput=function(b){if(this.data("dateinput"))return this;b=e.extend(true,{},I.conf,b);e.each(b.css,function(i,k){if(!k&&i!="prefix")b.css[i]=(b.css.prefix||"")+(k||i)});var a;this.each(function(){var i=new aa(e(this),b);Z.push(i);i=i.getInput().data("dateinput",i);a=a?a.add(i):i});return a?a:this}})(jQuery);

